---
- name: apache2
  hosts: client1
  tasks:
    - name: Vérifier si apache2 est installé
      apt: 
        name: apache2
        state: present
        update_cache: yes
    - name: Démarrer le service apache2
      service:
        name: apache2
        state: started
        enabled: yes
      # notify: desinstalle apache2
    - name: Copier le index.html 
      copy:
        src: ../index.html
        dest: /var/www/html/index.html
        owner: www-data
        group: www-data
        mode: '0644'
      notify: redemarrer apache2
  handlers:
      - name: redemarrer apache2
        service:
          name: apache2
          state: restarted
    # - name: desinstalle apache2
    #   apt:
    #     name: apache2
    #     state: absent






